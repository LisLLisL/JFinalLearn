package com.langmy.jFinal.model;

import cn.dreampie.shiro.core.SubjectKit;
import cn.dreampie.sqlinxml.SqlKit;
import com.jfinal.plugin.activerecord.Page;
import com.langmy.jFinal.model.base.BaseFollower;

/**
 * Generated by JFinal.
 */
@SuppressWarnings("serial")
public class Follower extends BaseFollower<Follower> {
	public static final Follower dao = new Follower();

	public boolean getFollowed() {
		User user = (User) SubjectKit.getUser();
		if (this.get("followed") == null) {
			Follower following = Follower.dao.findFirstBy("`follower`.user_id =" + user.get("id") + " AND `follower`.link_id =" + this.get("id"));
			if (following != null) {
				this.put("followed", true);
			} else
				this.put("followed", false);
		}
		return this.getBoolean("followed");
	}

	public Page<Follower> paginateFollowingInfoBy(int pageNumber, int pageSize, String where, Object... paras) {
		return dao.paginate(pageNumber, pageSize, SqlKit.sql("follower.findInfoBySelect"), SqlKit.sql("follower.findFollowingInfoByExceptSelect") + getWhere(where), paras);
	}

	public Page<Follower> paginateFollowerInfoBy(int pageNumber, int pageSize, String where, Object... paras) {
		return dao.paginate(pageNumber, pageSize, SqlKit.sql("follower.findInfoBySelect"), SqlKit.sql("follower.findFollowerInfoByExceptSelect") + getWhere(where), paras);
	}
}
